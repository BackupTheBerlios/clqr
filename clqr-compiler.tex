% Copyright (C) 2008 Bert Burgemeister
%
% Permission is granted to copy, distribute and/or modify this
% document under the terms of the GNU Free Documentation License,
% Version 1.2 or any later version published by the Free Software
% Foundation; with no Invariant Sections, no Front-Cover Texts and
% no Back-Cover Texts. For details see file COPYING.
%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Compiler} 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Predicates} 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{LIST}{1cm}

  \IT{(\FU*{SPECIAL-OPERATOR-P} \VAR{foo})}
  {
  \retval{\T} if \VAR{foo} is a special operator.
  }

  \IT{(\FU*{COMPILED-FUNCTION-P} \VAR{foo})}
  {
  \retval{\T} if \VAR{foo} is of type \kwd{compiled-function}.
  }

\end{LIST}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Compilation} 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{LIST}{1cm}

  \IT{(\FU*{COMPILE} 
    \xorGOO{\NIL\\
      \VAR{name}}{\}}
    \Op{\VAR{definition}})}
  {
  Return \retval{compiled function} or replace \retval{\VAR{name}}'s
  function definition with the compiled function. Return \retvalii{\T} in case
  of warnings or errors, and \retvaliii{\T} in case of warnings
  or errors excluding style warnings.
  }

  \IT{(\FU*{COMPILE-FILE} \VAR{file} 
    \orGOO{\kwd{:output-file}\VAR{ out-path}\\
      \kwd{:verbose} \VAR{ bool}\DF{\V{*compile-verbose*}}\\
      \kwd{:print}\VAR{ bool}\DF{\V{*compile-print*}}\\
      \kwd{:external-format} \VAR{
        file-format}\DF{\kwd{:default}}}{\}})}
  {
  Write compiled contents of \VAR{file} to \VAR{out-path}.
  Return \retval{true output path} or \retval{\NIL}, \retvalii{\T}
  in case of warnings or errors, \retvaliii{\T} in case of warnings
  or errors excluding style warnings.
  }

  \IT{\arrGOO{\V*{*compile-file-pathname*}\DF{\NIL}\\
      \V*{*compile-file-truename*}\DF{\NIL}}{.}}
  {
  Input file used by \FU{compile-file}.
  }

  \IT{\arrGOO{\V*{*compile-print*}\\
      \V*{*compile-verbose*}}{.}}
  {
  Defaults used in \FU{compile-file}.
  }

  \IT{(\FU*{COMPILE-FILE-PATHNAME} \VAR{file} \Op{\kwd{:output-file}
      \VAR{path}} \Op{\VAR{other-keyargs}})}
  {
  \retval{Pathname} \FU{COMPILE-FILE} writes to if invoked with the
  same arguments.
  }

  \IT{(\FU*{LOAD} \VAR{path} 
    \orGOO{\kwd{:verbose} \VAR{ bool}\DF{\V{*load-verbose*}}\\
      \kwd{:print} \VAR{ bool}\DF{\V{*load-print*}}\\
      \kwd{:if-does-not-exist} \VAR{ bool}\DF{\T}\\
      \kwd{:external-format} \VAR{
        file-format}\DF{\kwd{:default}}}{\}})}
  {
  Load source file or compiled file into Lisp environment. Return
  \retval{\T} if successful. 
  }

  \IT{\arrGOO{\V*{*load-pathname*}\DF{\NIL}\\
      \V*{*load-truename*}\DF{\NIL}}{.}}
  {
  Input file used by \FU{load}.
  }

  \IT{\arrGOO{\V*{*load-print*}\DF{\NIL}\\
      \V*{*load-verbose*}}{.}}
  {
  Defaults used in \FU{load}.
  }

  \IT{(\SO*{EVAL-WHEN} (%
    \orGOO{\Goo{\kwd{:compile-toplevel}\XOR\kwd{compile}}\\
      \Goo{\kwd{:load-toplevel}\XOR\kwd{load}}\\
      \Goo{\kwd{:execute}\XOR\kwd{eval}}}{\}}) \OPn{\VAR{form}})} 
  {
  Evaluate \VAR{form}s returning \retval{values of last \VAR{form}} if
  \SO{EVAL-WHEN} is in the top-level of a file being compiled, in the
  top-level of a compiled file being loaded, or anywhere,
  respectively. (\kwd{compile}, \kwd{load} and \kwd{eval} deprecated.)
  }

  \IT{(\MC*{WITH-COMPILATION-UNIT} (\Op{\kwd{:override}
      \VAR{bool}\DF{\NIL}}) \OPn{\VAR{form}})}
  {
  Return \retval{values of \VAR{form}s}. Warnings deferred by the
  compiler until end of compilation are deferred until the end of
  evaluation of \VAR{form}s. 
  }

  \IT{(\SO*{LOAD-TIME-VALUE} \VAR{form}
    \Op{\VAR{read-only}\DF{\NIL}})}
  {
  Evaluate \VAR{form} at compile time and treat \retval{its value} as
  literal at run time. 
  }

  \IT{(\SO*{QUOTE} \VAR{foo})}
  {
  Return \retval{unevaluated \VAR{foo}}.
  }

  \IT{(\GFU*{MAKE-LOAD-FORM} \VAR{foo} \Op{\VAR{environment}})}
  {
  Its methods are to return a \retval{creation form} which on
  evaluation at \FU{load} time returns an object equivalent to
  \VAR{foo}, and an optional \retvalii{initialization form} which on
  evaluation performs some initialization of the object. 
  }

  \IT{(\FU*{MAKE-LOAD-FORM-SAVING-SLOTS} \VAR{foo}
    \orGOO{\kwd{:slot-names} \VAR{ slots}\\
      \kwd{:environment}  \VAR{ environment}}{\}})}
  {
  Return a \retval{creation form} and an \retvalii{initialization
    form} which on evaluation construct an object equivalent to
  \VAR{foo} with \VAR{slots} initialized with the corresponding values
  from \VAR{foo}. 
  }

  \IT{\arrGOO{(\FU*{MACRO-FUNCTION} \VAR{ symbol }
      \Op{\VAR{environment}})\\
      (\FU*{COMPILER-MACRO-FUNCTION} \VAR{ name }
      \Op{\VAR{environment}})}{.}}
  {
  Return specified \retval{macro function}, or \retval{compiler mac\-ro
    func\-tion}, respectively, if any. Return \retval{\NIL}
  otherwise. \kwd{setf}able. 
  }
  
  \IT{(\FU*{EVAL} \VAR{form})}
  {
  Return \retval{values of \VAR{form}}.
  }

\end{LIST}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection[REPL~\&~Debug]{REPL and Debugging} 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{LIST}{1cm}
  
  \IT{\arrGOO{\V*{+}\XOR\V*{++}\XOR\V*{+++}\\[1pt]
      \V*{*}\text{ }\XOR\text{ }\V*{**}\text{ }\XOR\text{ }\V*{***}\\[1pt]
      \V*{/}\text{ }\XOR\text{ }\V*{//}\text{ }\XOR\text{ }\V*{///}}{.}}
  {
  Last, penultimate, or antepenultimate \retval{form} evaluated in the REPL, or
  their respective \retval{primary value}, or a \retval{list} of their respective
  values. 
  }

  \IT{\V*{--}}
  {
  \retval{Form} currently being evaluated by the REPL.
  }

  \IT{(\FU*{APROPOS} \VAR{string} \OPn{\VAR{package}})}
  {
  Print interned symbols containing \VAR{string}.
  }

  \IT{(\FU*{APROPOS-LIST} \VAR{string} \OPn{\VAR{package}})}
  {
  \retval{List of interned symbols} containing \VAR{string}.
  }

  \IT{(\FU*{DRIBBLE} \Op{\VAR{path}})}
  {
  Save a record of interactive session to file at \VAR{path}. Without
  \VAR{path}, close that file.
  }

  \IT{(\FU*{ED} \Op{\VAR{file-or-function}\DF{\NIL}})}
  {
  Invoke editor if possible.
  }

  \IT{(\xorGOO{\FU*{MACROEXPAND-1}\\
      \FU*{MACROEXPAND}}{\}} \VAR{form} \Op{\VAR{environment}})}
  {
  Return \retval{macro expansion}, once or entirely, respectively, of
  \VAR{form} and \retvalii{\T} if \VAR{form} is a macro form. 
  Return \retval{\VAR{form}} and \retvalii{\NIL} otherwise.
  }

  \IT{\V*{*macroexpand-hook*}}
  {
  Function called by \FU{macroexpand-1} to generate macro expansions.
  }

  \IT{(\MC*{TRACE} \OPn{\VAR{function}})}
  {
  Cause \VAR{function}s to be traced. With no arguments,
  return \retval{list of traced functions}.
  }

  \IT{(\MC*{UNTRACE} \OPn{\VAR{function}})}
  {
  Stop \VAR{function}s, or each currently traced function, from being
  traced. 
  }

  \IT{\V*{*trace-output*}}
  {
  Stream \MC{trace} and \MC{time} print their output on.
  }

  \IT{(\MC*{STEP} \VAR{form})}
  {
  Step through evaluation of \VAR{form}. Return \retval{values of
    \VAR{form}}. 
  }

  \IT{(\FU*{BREAK} \Op{\VAR{control} \OPn{\VAR{arg}}})}
  {
  Jump directly into debugger; return \retval{\NIL}.
  See p.\ \pageref{section:Format}, \FU{format}, for \VAR{control}
  and \VAR{arg}s. 
  }

  \IT{(\MC*{TIME} \OPn{\VAR{form}})}
  {
  Evaluate \VAR{form}s and print timing information to
  \V{*trace-output*}. Return \retval{values of \VAR{form}s}. 
  }
  \IT{(\FU*{INSPECT} \VAR{foo})}
  {
    Interactively give information about \VAR{foo}.
  }

  \IT{(\FU*{DESCRIBE} \VAR{foo}
    \Op{\DES{\VAR{stream}}\DF{\V{*standard-output*}}})}
  {
  Send information about \VAR{foo} to \VAR{stream}.
  }

  \IT{(\GFU*{DESCRIBE-OBJECT} \VAR{foo} \Op{\DES{\VAR{stream}}})}
  {
  Send information about \VAR{foo} to \VAR{stream}. Not to be
  called by user.
  }

  \IT{(\FU*{DISASSEMBLE} \VAR{function})}
  {
  Send disassembled representation of \VAR{function} to
  \V{*standard-output*}. Return \retval{\NIL}.
  }

\end{LIST}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Declarations}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{LIST}{1cm}

  \IT{\arrGOO{(\FU*{PROCLAIM} \VAR{ decl})\\
      (\MC*{DECLAIM } \OPn{\NEV{\VAR{decl}}})}{.}}
  {
  Globally make declaration(s) \VAR{decl}. \VAR{decl} can be:
  \kwd{declaration},      
  \kwd{type},
  \kwd{ftype},           
  \kwd{inline},   
  \kwd{notinline},
  \kwd{optimize}, or
  \kwd{special}.
  See below.
  }

  \IT{(\kwd*{DECLARE} \OPn{\NEV{\VAR{decl}}})}
  {
  Inside certain forms, locally make declarations \VAR{decl}. \VAR{decl} can be:
  \kwd{dynamic-extent},
  \kwd{type},
  \kwd{ftype},           
  \kwd{ignorable},       
  \kwd{ignore},     
  \kwd{inline},     
  \kwd{notinline},  
  \kwd{optimize}, or
  \kwd{special}.
  See below.      
  }

  \begin{LIST}{.5cm}
    
    \IT{(\kwd*{DECLARATION} \OPn{foo})}
    {
    Make \VAR{foo}s names of declarations.
   }
 
    \IT{(\kwd*{DYNAMIC-EXTENT} \OPn{\VAR{variable}} \OPn{(\kwd{function}
        \VAR{function})})}
    {
    Declare lifetime of \VAR{variable}s and/or \VAR{function}s to end
    when control leaves enclosing block.
  }


    \IT{\arrGOO{(\kwd*{TYPE} \VAR{ type} \OPn{\VAR{ variable}})\\
        (\kwd*{FTYPE} \VAR{ type} \OPn{\VAR{ function}})}{.}}
    {
    Declare \VAR{variable}s or \VAR{function}s to be of \VAR{type}.
  }

    \IT{(\xorGOO{\kwd*{IGNORABLE}\\
        \kwd*{IGNORE}}{\}}\xorGOO{%
        \VAR{var}\\
        (\kwd{function} \VAR{ function})}{\}^{\!\!*}})}
    {
    Suppress warnings about used/unused bindings.
  }

    \IT{\arrGOO{(\kwd*{INLINE} \OPn{\VAR{ function}})\\
        (\kwd*{NOTINLINE} \OPn{\VAR{ function}})}{.}}
    {
    Tell compiler to integrate/not to integrate, respectively, called
    \VAR{function}s into the calling routine.
  }

    \IT{(\kwd*{OPTIMIZE} \orGOO{%
        \kwd*{COMPILATION-SPEED}\XOR(\kwd*{COMPILATION-SPEED}\VAR{ n})\\
        \kwd*{DEBUG}\XOR(\kwd*{DEBUG}\VAR{ n})\\
        \kwd*{SAFETY}\XOR(\kwd*{SAFETY}\VAR{ n})\\
        \kwd*{SPACE}\XOR(\kwd*{SPACE}\VAR{ n})\\
        \kwd*{SPEED}\XOR(\kwd*{SPEED}\VAR{ n})}{\}})}
    {
    Tell compiler how to optimize. $n=0$ means unimportant, $n=1$ is
    neutral, $n=3$ means important.
  }

    \IT{(\kwd*{SPECIAL} \OPn{\VAR{var}})}
    {
    Declare \VAR{var}s being dynamic.
  }

  \end{LIST}
\end{LIST}




% LocalWords:  mac ro func tion
