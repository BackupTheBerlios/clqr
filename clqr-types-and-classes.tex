% Copyright (C) 2008 Bert Burgemeister
%
% Permission is granted to copy, distribute and/or modify this
% document under the terms of the GNU Free Documentation License,
% Version 1.2 or any later version published by the Free Software
% Foundation; with no Invariant Sections, no Front-Cover Texts and
% no Back-Cover Texts. For details see file COPYING.
%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Types and Classes} 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\begin{figure}
  \begin{center}
    \boxGOO{%
      \T\index{T}%
      \boxGOO{%
        \kwd*{NUMBER}
        \boxGOO{%
          \kwd*{REAL } \OP{\VAR{lower-limit}\DF{\kwd{*}}\text{ }\Op{\VAR{upper-limit}\DF{\kwd{*}}}}\\
          \boxGOO{%
            \kwd*{RATIONAL } \OP{\VAR{lower-limit}\DF{\kwd{*}}\text{ }\Op{\VAR{upper-limit}\DF{\kwd{*}}}}\\
            \boxGOO{%
              \kwd*{INTEGER } \OP{\VAR{lower-limit}\DF{\kwd{*}}\text{ }\Op{\VAR{upper-limit}\DF{\kwd{*}}}}\\
              \boxGOO{%
                \kwd*{FIXNUM} \\
                \kwd*{BIGNUM} \\
                \kwd*{SIGNED-BYTE } \Op{\VAR{size}\DF{\kwd{*}}}\\
                \boxGOO{\kwd*{UNSIGNED-BYTE } \Op{\VAR{size}\DF{\kwd{*}}}
                  \boxGOO{\kwd*{BIT} }}}\boxGOOcr
              \kwd*{RATIO}}\boxGOOcr
            \kwd*{FLOAT } \OP{\VAR{lower-limit}\DF{\kwd{*}}\text{ }\Op{\VAR{upper-limit}\DF{\kwd{*}}}}\\
            \boxGOO{%
              \kwd*{SHORT-FLOAT } \OP{\VAR{lower-limit}\DF{\kwd{*}}\text{ }\Op{\VAR{upper-limit}\DF{\kwd{*}}}}\\
              \kwd*{SINGLE-FLOAT } \OP{\VAR{lower-limit}\DF{\kwd{*}}\text{ }\Op{\VAR{upper-limit}\DF{\kwd{*}}}}\\
              \kwd*{DOUBLE-FLOAT } \OP{\VAR{lower-limit}\DF{\kwd{*}}\text{ }\Op{\VAR{upper-limit}\DF{\kwd{*}}}}\\
              \kwd*{LONG-FLOAT } \OP{\VAR{lower-limit}\DF{\kwd{*}}\text{ }\Op{\VAR{upper-limit}\DF{\kwd{*}}}}}}\boxGOOcr
          \kwd*{COMPLEX } \Op{\VAR{type}\DF{\kwd{*}}}}\boxGOOcr
        \kwd*{SEQUENCE}
        \boxGOO{%
          \kwd*{LIST}
          \boxGOO{%
            \kwd*{CONS } \OP{\VAR{car-type}\DF{\kwd{*}}\text{ }\Op{\VAR{cdr-type}\DF{\kwd{*}}}}\\
          \kwd*{SYMBOL}\footnotemark[2]
          \boxGOO{
            \kwd*{NULL}}}\boxGOOcr
          \kwd*{ARRAY}\footnotemark[2] \OP{\VAR{type}\DF{\kwd{*}}\text{ }\Op{\VAR{dimension}\DF{\kwd{*}}}}\\
          \boxGOO{%
            \kwd*{SIMPLE-ARRAY}\footnotemark[2] \OP{\VAR{type}\DF{\kwd{*}}\text{ }\Op{\VAR{dimension}\DF{\kwd{*}}}}\\
            \boxGOO{%
              \kwd*{VECTOR}\footnotemark[2] \OP{\VAR{type}\DF{\kwd{*}}\text{ }\Op{\VAR{size}\DF{\kwd{*}}}}\\
              \boxGOO{%
                \kwd*{BIT-VECTOR}\footnotemark[2] \Op{\VAR{size}\DF{\kwd{*}}}\\
                \boxGOO{%
                  \kwd*{SIMPLE-BIT-VECTOR } \Op{\VAR{size}\DF{\kwd{*}}}}\boxGOOcr
                \kwd*{STRING}\footnotemark[2] \Op{\VAR{size}\DF{\kwd{*}}}\\
                \boxGOO{%
                  \kwd*{SIMPLE-STRING } \Op{\VAR{size}\DF{\kwd{*}}}\\
                  \boxGOO{%
                    \kwd*{BASE-STRING}\footnotemark[2] \Op{\VAR{size}\DF{\kwd{*}}}\\
                    \boxGOO{%
                      \kwd*{SIMPLE-BASE-STRING } \Op{\VAR{size}\DF{\kwd{*}}}}}}\boxGOOcr
                \kwd*{SIMPLE-VECTOR } \Op{\VAR{size}\DF{\kwd{*}}}}}\boxGOOcr
            \kwd*{VECTOR}  \OP{\VAR{type}\DF{\kwd{*}}\text{ }\Op{\VAR{size}\DF{\kwd{*}}}}\\
            \boxGOO{%
              \kwd*{STRING} \Op{\VAR{size}\DF{\kwd{*}}}
              \boxGOO{%
                \kwd*{BASE-STRING} \Op{\VAR{size}\DF{\kwd{*}}}}\boxGOOcr
              \kwd*{BIT-VECTOR} \Op{\VAR{size}\DF{\kwd{*}}}}}}\boxGOOcr
        \kwd*{ARRAY} \OP{\VAR{type}\DF{\kwd{*}}\text{ }\Op{\VAR{dimension}\DF{\kwd{*}}}}\\
        \boxGOO{%
          \kwd*{SIMPLE-ARRAY} \OP{\VAR{type}\DF{\kwd{*}}\text{ }\Op{\VAR{dimension}\DF{\kwd{*}}}}}\boxGOOcr
        \kwd*{CHARACTER}
        \boxGOO{%
          \kwd*{BASE-CHAR}
          \boxGOO{%
            \kwd*{STANDARD-CHAR}}\boxGOOcr
          \kwd*{EXTENDED-CHAR}}\boxGOOcr
        \kwd*{STREAM}
        \boxGOO{%
          \kwd*{FILE-STREAM},\>
          \kwd*{TWO-WAY-STREAM},\>
          \kwd*{SYNONYM-STREAM},\\
          \kwd*{STRING-STREAM},\>
          \kwd*{BROADCAST-STREAM},\>
          \kwd*{ECHO-STREAM}\\
          \kwd*{CONCATENATED-STREAM}}\boxGOOcr
        \kwd*{PATHNAME}
        \boxGOO{%
          \kwd*{LOGICAL-PATHNAME}}\boxGOOcr
        \kwd*{SYMBOL}
        \boxGOO{%
          \kwd*{KEYWORD},\>
          \kwd*{BOOLEAN}}\boxGOOcr
        \kwd*{FUNCTION } \OP{\VAR{arg-types }\Op{\VAR{value-types}}}\\
        \boxGOO{%
          \kwd*{GENERIC-FUNCTION}
          \boxGOO{\kwd*{STANDARD-GENERIC-FUNCTION}}\boxGOOcr
          \kwd*{COMPILED-FUNCTION}}\boxGOOcr
        \kwd*{STANDARD-OBJECT}
        \boxGOO{%
          \kwd*{CLASS}
          \boxGOO{%
            \kwd*{STANDARD-CLASS},\>
            \kwd*{BUILT-IN-CLASS},\\
            \kwd*{STRUCTURE-CLASS}}\boxGOOcr
          \kwd*{STANDARD-METHOD}}\boxGOOcr
        \kwd*{ATOM},\>
        \kwd*{HASH-TABLE},\>
        \kwd*{STRUCTURE-OBJECT},\>
        \kwd*{PACKAGE},\>
        \kwd*{READTABLE},\\
        \kwd*{RANDOM-STATE},\>
        \kwd*{RESTART},\>
        \kwd*{METHOD},\>
        \kwd*{METHOD-COMBINATION}}}
  \end{center}\vspace{-1em}
              {\footnotesize\footnotemark[2]For supertypes of this
                type look for the instance without a \footnotemark[2].}\\
              {\footnotesize As a type argument, \kwd*{*} means no restriction.}
              
  \caption{Data Types.}%
\end{figure}


\begin{LIST}{1cm}

  \IT{(\FU*{TYPEP} \VAR{foo} \VAR{type} \Op{\VAR{environment}})}
  {
  Return \retval{\T} if \VAR{foo} is of \VAR{type}.
  }

  \IT{(\FU*{SUBTYPEP} \VAR{type-a} \VAR{type-b}
    \Op{\VAR{environment}})}
  {
  Return \retval{\T} if \VAR{type-a} is a recognizable subtype of
  \VAR{type-b}, and \retvalii{\NIL} if the relationship could not be
  determined. 
  }

  \IT{(\SO*{THE} \NEV{\VAR{type}} \VAR{form})}
  {
  Return \retval{values} of \VAR{form} which are declared to be of
  \VAR{type}. 
  }

  \IT{(\FU*{COERCE} \VAR{object} \VAR{type})}
  {
  Coerce \VAR{object} into \VAR{type}.
  }

  \IT{(\MC*{TYPECASE} \VAR{foo} \OPn{(\NEV{\VAR{type}} \OPn{\VAR{a-form}})} 
    \OP{(\xorGOO{\kwd*{OTHERWISE}\\
        \T}{\}} \OPn{\VAR{b-form}\DF{\NIL}})})}
  {
  Return \retval{values of the \VAR{a-form}s} whose \VAR{type} is
  \VAR{foo} of. Return \retval{values of \VAR{b-form}s} if no
  \VAR{type} matches.
  }

  \IT{(\xorGOO{\MC*{CTYPECASE}\\
      \MC*{ETYPECASE}}{\}} \VAR{foo} \OPn{(\NEV{\VAR{type}} \OPn{\VAR{form}\DF{\NIL}})})}
  {
  Return \retval{value of the \VAR{form}s} whose \VAR{type} is
  \VAR{foo} of. Signal correctable/non-correctable error, respectively
  if no \VAR{type} matches.
  }

  \IT{(\FU*{TYPE-OF} \VAR{foo})}
  {
  \retval{Type of \VAR{foo}}.
  }

  \IT{(\kwd*{CHECK-TYPE} \VAR{place} \VAR{type} \Op{\VAR{string}})}
  {
  Return \retval{\NIL} and signal correctable error if \VAR{place} is
  not of {type}. 
  }

  \IT{(\FU*{STREAM-ELEMENT-TYPE} \VAR{stream})}
  {
  Return \retval{type} of \VAR{stream} objects.
  }

  \IT{(\FU*{ARRAY-ELEMENT-TYPE} \VAR{array})}
  {
  Element \retval{type} \VAR{array} holds.
  }

  \IT{(\FU*{UPGRADED-ARRAY-ELEMENT-TYPE} \VAR{type}
    \Op{\VAR{environment}})}
  {
  \retval{Element type} of most specialized array capable of holding
  elements of \VAR{type}. 
  }

  \IT{(\MC*{DEFTYPE} \VAR{name} \OPn{\VAR{arg}} 
    \OPn{(\kwd{declare} \OPn{\NEV{\VAR{decl}}})} \Op{\NEV{\VAR{doc}}} 
    \OPn{\VAR{form}})}
  {
  Define new type \retval{\VAR{name}}. %FIXME:AUGMENT
  }

  \IT{\arrGOO{(\kwd{EQL } \VAR{foo})\\
      (\kwd{MEMBER } \OPn{\VAR{foo}})}{.}}
  {
  Specifier for a type comprising \VAR{foo} or \VAR{foo}s.
  }

  \IT{(\kwd*{SATISFIES} \VAR{name})}
  {
  Type specifier for all objects satisfying predicate \VAR{name}. 
  }

  \IT{(\kwd*{MOD} \VAR{n})}
  {
  Type specifier for all integers $<n$.
  }

  \IT{(\kwd{NOT} \VAR{type})}
  {
  Complement of type.
  }

  \IT{(\kwd*{AND} \OPn{\VAR{type}}\DF{\T})}
  {
  Type specifier for intersection of \VAR{type}s.
  }

  \IT{(\kwd*{OR} \OPn{\VAR{type}}\DF{\NIL})}
  {
  Type specifier for union of \VAR{type}s.
  }

  \IT{(\kwd*{VALUES} \OPn{\VAR{type}} \OP{\OPn{\VAR{type}}
      \Op{\VAR{other-args}}})}
  {
  Type specifier for multiple values.
  }

  \end{LIST}


