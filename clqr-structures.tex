% Copyright (C) 2008 Bert Burgemeister
%
% Permission is granted to copy, distribute and/or modify this
% document under the terms of the GNU Free Documentation License,
% Version 1.2 or any later version published by the Free Software
% Foundation; with no Invariant Sections, no Front-Cover Texts and
% no Back-Cover Texts. For details see file COPYING.
%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Structures}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{LIST}{1cm}
  
  \IT{(\FU*{SLOT-EXISTS-P} \VAR{foo} \VAR{bar})}
  {
  \retval{\T} if \VAR{foo} has a slot \VAR{bar}.
  }

  \IT{(\SF*{DEFSTRUCT}
    \GOO{\VAR{name}\XOR
      (\VAR{name}
      \orGOO{%
        \xorGOO{%
          \kwd{:conc-name}\\
          (\kwd{:conc-name } \Op{\VAR{slot-prefix}\DF{\VAR{name}\LIT{-}}})}{.}\\
        \xorGOO{%
          \kwd{:constructor}\\
          (\kwd{:constructor }
          \OP{\VAR{maker}\DF{\LIT{make-}\VAR{name}}\text{ }
            \Op{({\OPn{\VAR{arg}}})}})}{\}^{\!\!*}}\\
        \xorGOO{%
          \kwd{:copier}\\
          (\kwd{:copier }
          \Op{\VAR{copier}\DF{\LIT{copy-}\VAR{name}}})}{.}\\
        (\kwd{:include } \VAR{ struct}\text{ }
        \xorGOO{%
          \VAR{slot}\\
          (\VAR{slot } \Op{\VAR{init}\text{ }
            \orGOO{
              \kwd{:type} \VAR{ type}\\
              \kwd{:read-only} \VAR{ bool}}{\}}})\\
        }{\}^{\!\!*}})\\
        (\kwd{:type } \xorGOO{\kwd{list}\\
          \kwd{vector}\\
          (\kwd{vector}\VAR{ type})}{\}})\text{ }\Op{\kwd{:named}}\\
        (\kwd{:initial-offset} \VAR{ n})\\
        \xorGOO{%
          \kwd{:predicate}\\
          (\kwd{:predicate } \Op{\VAR{p-name}\DF{\VAR{name}\LIT{-p}}})}{.}\\
        \xorGOO{
          (\kwd{:print-object } \Op{\VAR{printer}})\\
          (\kwd{:print-function } \Op{\VAR{printer}})
        }{.}%
      }{\}}%
      )%
    }
    \Op{\VAR{documentation}}
    \xorGOO{
      \VAR{slot-name}\\
      (\VAR{slot-name } \Op{\VAR{init}\text{ }
        \orGOO{
          \kwd{:type} \VAR{ type}\\
          \kwd{:read-only} \VAR{ bool}
        }{\}}})
    }{\}^{\!\!*}}%
    )}
  {
  Define structure \retval{\VAR{name}} together with functions
  \LIT{make-}\VAR{name}, \LIT{copy-}\VAR{name} and
  \VAR{name}\LIT{-p}; and accessors \VAR{name}\LIT{-}\VAR{slot-name}.
  }

  \IT{(\FU*{COPY-STRUCTURE} \VAR{structure})}
  {
  Return \retval{copy of \VAR{structure}} with shared slot values.
  }

\end{LIST}


