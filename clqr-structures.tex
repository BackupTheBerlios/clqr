%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Structures}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{LIST}{1cm}
  
  \IT{(\FU*{SLOT-EXISTS-P} \VAR{foo} \VAR{bar})}
  {
  \retval{\T} if \VAR{foo} has a slot \VAR{bar}.
  }

  \IT{(\FU*{SLOT-BOUNDP} \VAR{instance} \VAR{slot})}
  {
  \retval{\T} if \VAR{slot} in \VAR{instance} is bound.
  }

  \IT{(\SF*{DEFSTRUCT}
    \GOO{\VAR{name}\XOR
      (\VAR{name}
      \orGOO{%
        \xorGOO{%
          \kwd{:conc-name}\\
          (\kwd{:conc-name } \Op{\VAR{slot-prefix}\DF{\VAR{name}\LIT{-}}})}{\}}\\
        \xorGOO{%
          \kwd{:constructor}\\
          (\kwd{:constructor } \OP{\VAR{maker}\DF{\LIT{make-}\VAR{name}}
            \Op{({\OPn{\VAR{arg}}})}})}{\}^{\!\!*}}\\
        \xorGOO{%
          \kwd{:copier}\\
          (\kwd{:copier }
          \Op{\VAR{copier}\DF{\LIT{copy-}\VAR{name}}})}{\}}\\
        (\kwd{:include} \VAR{ struct} 
        \xorGOO{%
          \VAR{slot}\\
          (\VAR{slot } \Op{\VAR{init} 
            \orGOO{
              \kwd{:type} \VAR{ type}\\
              \kwd{:read-only} \VAR{ bool}}{\}}})\\
        }{\}^{\!\!*}})\\
        (\kwd{:type } \Goo{\kwd{list}\XOR\kwd{vector}\XOR(\kwd{vector}
          \VAR{ type})})\\
        (\kwd{:initial-offset} \VAR{ n})\\
        \kwd{:named}\\
        \xorGOO{%
          \kwd{:predicate}\\
          (\kwd{:predicate } \Op{\VAR{p-name}\DF{\VAR{name}\LIT{-p}}})}{\}}\\
        \xorGOO{
          (\kwd{:print-object } \Op{\VAR{printer}})\\
          (\kwd{:print-function } \Op{\VAR{printer}})
        }{\}}%
      }{\}}%
      )%
    }
    \Op{\VAR{documentation}}
    \xorGOO{
      \VAR{slot-name}\\
      \VAR{slot-name } \Op{\VAR{init}
        \orGOO{
          \kwd{:type} \VAR{ type}\\
          \kwd{:read-only} \VAR{ bool}
        }{\}}}
    }{\}^{\!\!*}}%
    )}
  {
  Define structure \retval{\VAR{name}} together with functions
  \LIT{make-}\VAR{name}, \LIT{copy-}\VAR{name}, and
  \LIT{p-}\VAR{name}; and accessors \VAR{slot-prefix-slot-name}.
  }


  \IT{(\SF*{WITH-ACCESSORS} (\OPn{(\VAR{var} \VAR{accessor})})
    \VAR{instance}  \OPn{(\kwd{declare} \OPn{\VAR{decl}})}
    \OPn{\VAR{form}})}
  {
  Evaluate \VAR{form}s with variables \VAR{var} locally bound to
  \VAR{accessor}s of \VAR{instance}. 
  Return \retval{values of \VAR{form}s}.
  }

  \IT{(\FU*{COPY-STRUCTURE} \VAR{structure})}
  {
  Return \retval{copy of \VAR{structure}} with shared slot values.
  }

  \IT{(\FU*{SLOT-MAKUNBOUND} \VAR{instance} \VAR{slot})}
  {
  Make \VAR{slot} in \retval{\VAR{instance}} unbound.
  }

\end{LIST}


